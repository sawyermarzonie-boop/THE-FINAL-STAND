<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fun Zone</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
    }
    #video-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: -1;
    }
    .ui {
      position: absolute;
      top: 10px; left: 10px;
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 15px;
      border-radius: 8px;
    }
    button { margin-top: 8px; padding: 10px 14px; cursor: pointer; border: none; border-radius: 5px; }
    #minesweeper { margin-top: 20px; }
    table { border-collapse: collapse; margin-top: 10px; }
    td { width: 30px; height: 30px; text-align: center; border: 1px solid #444; cursor: pointer; background: #999; }
    td.flag { background: orange; }
    td.revealed { background: #ccc; }
  </style>
</head>
<body>

<!-- Video background (placeholder) -->
<video id="video-bg" autoplay loop muted>
  <source src="https://yourusername.github.io/background.mp4" type="video/mp4">
</video>

<!-- Settings panel -->
<div class="ui">
  <h3>Settings</h3>
  <label>
    <input type="checkbox" id="music-toggle" checked> Music On
  </label><br>
  <label>
    <input type="checkbox" id="video-toggle" checked> Animated Background
  </label>
  <hr>
  <label>Difficulty:
    <select id="diff">
      <option value="easy">Easy (5Ã—5, 5 mines)</option>
      <option value="medium">Medium (8Ã—8, 12 mines)</option>
      <option value="hard">Hard (10Ã—10, 20 mines)</option>
    </select>
  </label><br>
  <button onclick="startGame()">Restart Game</button>
</div>

<!-- Background music -->
<audio id="bgmusic" loop>
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
</audio>

<!-- Links section -->
<div class="ui" style="top: 150px;">
  <h3>Fun Links</h3>
  <a href="https://www.coolmathgames.com/" target="_blank">Cool Math Games</a><br>
  <a href="https://www.soundtrap.com/" target="_blank">Soundtrap</a>
</div>

<!-- Minesweeper game -->
<div id="minesweeper" class="ui" style="top: 270px; max-width: fit-content;"></div>

<script>
// Game variables
let rows, cols, mines, board, revealed;

function setDifficulty(d) {
  if (d==="easy") { rows=5; cols=5; mines=5; }
  else if (d==="medium") { rows=8; cols=8; mines=12; }
  else { rows=10; cols=10; mines=20; }
}

function startGame() {
  setDifficulty(document.getElementById("diff").value);
  initMinesweeper();
}

// build board
function initMinesweeper() {
  const container = document.getElementById("minesweeper");
  container.innerHTML = "";
  board = Array(rows).fill().map(()=>Array(cols).fill(0));
  revealed = Array(rows).fill().map(()=>Array(cols).fill(false));

  let placed=0;
  while(placed<mines) {
    let r=Math.floor(Math.random()*rows);
    let c=Math.floor(Math.random()*cols);
    if (board[r][c] !== "M") {
      board[r][c] = "M";
      placed++;
    }
  }

  for (let r=0; r<rows; r++) {
    for (let c=0; c<cols; c++) {
      if (board[r][c] !== "M") {
        let count=0;
        for (let dr=-1; dr<=1; dr++) {
          for (let dc=-1; dc<=1; dc++) {
            let nr=r+dr, nc=c+dc;
            if (nr>=0 && nr<rows && nc>=0 && nc<cols && board[nr][nc]==="M") count++;
          }
        }
        board[r][c] = count;
      }
    }
  }

  const table=document.createElement("table");
  for (let r=0;r<rows;r++){
    const tr=document.createElement("tr");
    for (let c=0;c<cols;c++){
      const td=document.createElement("td");
      td.dataset.r=r; td.dataset.c=c;
      td.oncontextmenu=e=>{ e.preventDefault(); flagCell(td); };
      td.onclick=e=>revealCell(td);
      tr.appendChild(td);
    }
    table.appendChild(tr);
  }
  container.appendChild(table);
}

// flag cell
function flagCell(td) {
  if (td.classList.contains("revealed")) return;
  td.classList.toggle("flag");
}

// reveal
function revealCell(td) {
  let r=parseInt(td.dataset.r), c=parseInt(td.dataset.c);
  if (td.classList.contains("flag") || revealed[r][c]) return;
  revealed[r][c]=true;
  td.classList.add("revealed");

  if (board[r][c]=="M") {
    td.innerText="ðŸ’¥";
    alert("BOOM! You hit a mine!");
    startGame();
  } else {
    if (board[r][c]>0) td.innerText=board[r][c];
    else {
      for (let dr=-1; dr<=1; dr++) {
        for (let dc=-1; dc<=1; dc++) {
          let nr=r+dr, nc=c+dc;
          if (nr>=0 && nr<rows && nc>=0 && nc<cols && !revealed[nr][nc]) {
            const nxt=document.querySelector(`td[data-r='${nr}'][data-c='${nc}']`);
            revealCell(nxt);
          }
        }
      }
    }
  }
}

startGame();

// music toggle
document.getElementById("music-toggle").addEventListener("change", e=>{
  const music=document.getElementById("bgmusic");
  if (e.target.checked) music.play();
  else music.pause();
});

// video toggle
document.getElementById("video-toggle").addEventListener("change", e=>{
  document.getElementById("video-bg").style.display = e.target.checked ? "block" : "none";
});
</script>

</body>
</html>

